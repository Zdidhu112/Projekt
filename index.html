<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <script src="https://unpkg.com/blockly/blockly_compressed.js"></script>
    <!-- Load the default blocks -->
    <script src="https://unpkg.com/blockly/blocks_compressed.js"></script>
    <!-- Load a generator -->
    <script src="https://unpkg.com/blockly/javascript_compressed.js"></script>
    <!-- Load a message file -->
    <script src="https://unpkg.com/blockly/msg/pl.js"></script>
</head>

<body>
    <div id="blocklyDiv" style="height: 480px; width: 100%;"></div>
    <button id="btn">Klik</button>
    <script>
        const toolbox = {
            // There are two kinds of toolboxes. The simpler one is a flyout toolbox.
            kind: 'flyoutToolbox',
            // The contents is the blocks and other items that exist in your toolbox.
            contents: [
                {
                    kind: 'block',
                    type: 'controls_if'
                },
                {
                    kind: 'block',
                    type: 'controls_whileUntil'
                },
                {
                    kind: 'block',
                    type: 'logic_boolean'
                },
                {
                    kind: 'block',
                    type: 'logic_compare'
                },
                {
                    kind: 'block',
                    type: 'logic_operation'
                },
                {
                    kind: 'block',
                    type: 'logic_negate'
                },
                {
                    kind: 'block',
                    type: 'variables_get'
                },
                {
                    kind: 'block',
                    type: 'variables_set'
                },
                {
                    kind: 'block',
                    type: 'lists_create_empty'
                },
                {
                    kind: 'block',
                    type: 'lists_repeat'
                },
                {
                    kind: 'block',
                    type: 'controls_whileUntil'
                },
                {
                    kind: 'block',
                    type: 'lists_reverse'
                },
                {
                    kind: 'block',
                    type: 'lists_isEmpty'
                },
                {
                    kind: 'block',
                    type: 'lists_length'
                }, {
                    kind: 'block',
                    type: 'text'
                }, {
                    kind: 'block',
                    type: 'text_join'
                }, {
                    kind: 'block',
                    type: 'text_create_join_container'
                }, {
                    kind: 'block',
                    type: 'text_create_join_item'
                }, {
                    kind: 'block',
                    type: 'text_append'
                },
                {
                    kind: 'block',
                    type: 'text_length'
                }, {
                    kind: 'block',
                    type: 'text_isEmpty'
                }, {
                    kind: 'block',
                    type: 'text_indexOf'
                },
                {
                    kind: 'block',
                    type: 'text_charAt'
                },

                {
                    kind: 'block',
                    type: 'math_arithmetic'
                },
                {
                    kind: 'block',
                    type: 'math_single'
                }, {
                    kind: 'block',
                    type: 'math_trig'
                }, {
                    kind: 'block',
                    type: 'math_constant'
                }, {
                    kind: 'block',
                    type: 'math_number_property'
                }, {
                    kind: 'block',
                    type: 'math_change'
                },
                {
                    kind: 'block',
                    type: 'math_round'
                }, {
                    kind: 'block',
                    type: 'math_on_list'
                }, {
                    kind: 'block',
                    type: 'math_modulo'
                }, {
                    kind: 'block',
                    type: 'math_constrain'
                },
                {
                    kind: 'block',
                    type: 'math_random_int'
                }, {
                    kind: 'block',
                    type: 'math_random_float'
                },
                {
                    kind: 'block',
                    type: 'math_atan2'
                }, {
                    kind: 'block',
                    type: 'logic_ternary'
                },
                {
                    kind: 'block',
                    type: 'text_prompt'
                },
                {
                    kind: 'block',
                    type: 'text_print'
                }, {
                    kind: 'block',
                    type: 'math_number'
                },


            ]
        };

        // The toolbox gets passed to the configuration options during injection.
        const workspace = Blockly.inject('blocklyDiv', {
            toolbox: toolbox,
            grid:
            {
                spacing: 20,
                length: 3,
                colour: '#ccc',
                snap: true
            },
        });
        const btn = document.querySelector('#btn')
        btn.addEventListener('click', () => {
            const jsCode = javascript.javascriptGenerator.workspaceToCode(workspace)
            alert(jsCode)
            eval(jsCode)
        })
    </script>
</body>

</html>